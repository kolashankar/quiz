(()=>{var e={};e.id=692,e.ids=[692],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},71587:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>o,pages:()=>c,routeModule:()=>g,tree:()=>x}),r(37540),r(22834),r(14763),r(35866);var a=r(23191),s=r(88716),l=r(37922),i=r.n(l),d=r(95231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);r.d(t,n);let x=["",{children:["dashboard",{children:["leaderboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,37540)),"/app/web_app/frontend/src/app/dashboard/leaderboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,22834)),"/app/web_app/frontend/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,14763)),"/app/web_app/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/app/web_app/frontend/src/app/dashboard/leaderboard/page.tsx"],o="/dashboard/leaderboard/page",m={require:r,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/leaderboard/page",pathname:"/dashboard/leaderboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:x}})},40331:(e,t,r)=>{Promise.resolve().then(r.bind(r,82375))},82375:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(10326),s=r(17577),l=r(24787),i=r(46685),d=r(94001),n=r(40381),x=r(2560);let c=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))});var o=r(16041),m=r(45003),g=r(71684);function u(){let{user:e}=(0,d.a)(),[t,r]=(0,s.useState)([]),[u,b]=(0,s.useState)(!0),[h,p]=(0,s.useState)("all_time"),[y,j]=(0,s.useState)("global"),[f,v]=(0,s.useState)([]),[N,k]=(0,s.useState)([]),[w,_]=(0,s.useState)(""),[P,S]=(0,s.useState)(""),[q,Z]=(0,s.useState)(!1),[A,C]=(0,s.useState)({totalParticipants:0,averageScore:0}),E=async()=>{try{let e={period:h,scope:y};"exam"===y&&w&&(e.exam_id=w),"subject"===y&&P&&(e.subject_id=P);let t=await i.R.getFilteredLeaderboard(e);if(r(t.leaderboard||t),t.leaderboard&&Array.isArray(t.leaderboard)){let e=t.leaderboard.length,r=e>0?t.leaderboard.reduce((e,t)=>e+t.average_score,0)/e:0;C({totalParticipants:e,averageScore:r})}}catch(e){console.error("Error fetching leaderboard:",e),n.ZP.error("Failed to load leaderboard")}finally{b(!1)}},$=async()=>{b(!0),await E(),n.ZP.success("Leaderboard refreshed!")},M=e=>{j(e),_(""),S("")};if(u)return a.jsx(l.gb,{text:"Loading leaderboard..."});let F=t.slice(0,3);t.slice(3);let L=t.find(t=>t.user_email===e?.email),R=L?t.slice(Math.max(0,(L.rank||0)-3),Math.min(t.length,(L.rank||0)+2)):[];return(0,a.jsxs)("div",{className:"p-4 md:p-6 lg:p-8 max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-gray-100",children:"Leaderboard"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 dark:text-gray-500 mt-2",children:"Compete with top learners"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>Z(!q),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 dark:text-gray-600 hover:bg-gray-200 dark:bg-gray-700 transition",children:[a.jsx(x.Z,{className:"w-5 h-5"}),"Filters"]}),a.jsx("button",{onClick:$,className:"px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary-dark transition",children:"Refresh"})]})]}),q&&(0,a.jsxs)(l.Zb,{className:"mb-6",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Filter Options"}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-600 mb-2",children:"Time Period"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>p("all_time"),className:`px-4 py-2 rounded-lg font-medium transition ${"all_time"===h?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Time"}),a.jsx("button",{onClick:()=>p("weekly"),className:`px-4 py-2 rounded-lg font-medium transition ${"weekly"===h?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"This Week"}),a.jsx("button",{onClick:()=>p("monthly"),className:`px-4 py-2 rounded-lg font-medium transition ${"monthly"===h?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"This Month"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-600 mb-2",children:"Scope"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>M("global"),className:`px-4 py-2 rounded-lg font-medium transition ${"global"===y?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Global"}),a.jsx("button",{onClick:()=>M("exam"),className:`px-4 py-2 rounded-lg font-medium transition ${"exam"===y?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"By Exam"}),a.jsx("button",{onClick:()=>M("subject"),className:`px-4 py-2 rounded-lg font-medium transition ${"subject"===y?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"By Subject"})]})]}),("exam"===y||"subject"===y)&&(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-600 mb-2",children:"Select Exam"}),(0,a.jsxs)("select",{value:w,onChange:e=>_(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Exams"}),f.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),"subject"===y&&(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-600 mb-2",children:"Select Subject"}),(0,a.jsxs)("select",{value:P,onChange:e=>S(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Subjects"}),N.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsx(l.Zb,{children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx(c,{className:"w-6 h-6 text-primary"})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 dark:text-gray-500",children:"Total Participants"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:A.totalParticipants})]})]})}),a.jsx(l.Zb,{children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-success/10 flex items-center justify-center",children:a.jsx(o.Z,{className:"w-6 h-6 text-success"})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 dark:text-gray-500",children:"Average Score"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[A.averageScore.toFixed(1),"%"]})]})]})}),a.jsx(l.Zb,{children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-warning/10 flex items-center justify-center",children:a.jsx(m.Z,{className:"w-6 h-6 text-warning"})}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 dark:text-gray-500",children:"Your Rank"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:L?`#${L.rank}`:"N/A"})]})]})})]}),F.length>=3&&(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[(0,a.jsxs)(l.Zb,{className:"text-center pt-12 pb-6 bg-gradient-to-b from-gray-100",children:[a.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-300 flex items-center justify-center mx-auto mb-3",children:a.jsx("span",{className:"text-3xl font-bold text-gray-700 dark:text-gray-300 dark:text-gray-600",children:"2"})}),a.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 truncate px-2",children:F[1]?.user_email}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-primary mt-2",children:[F[1]?.average_score.toFixed(1),"%"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 dark:text-gray-500 mt-1",children:[F[1]?.total_tests," tests"]})]}),(0,a.jsxs)(l.Zb,{className:"text-center pt-8 pb-6 bg-gradient-to-b from-warning/20 relative",children:[a.jsx(m.Z,{className:"w-12 h-12 text-warning mx-auto mb-2"}),a.jsx("div",{className:"w-24 h-24 rounded-full bg-warning flex items-center justify-center mx-auto mb-3",children:a.jsx("span",{className:"text-4xl font-bold text-white",children:"1"})}),a.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 truncate px-2",children:F[0]?.user_email}),(0,a.jsxs)("div",{className:"text-3xl font-bold text-warning mt-2",children:[F[0]?.average_score.toFixed(1),"%"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 dark:text-gray-500 mt-1",children:[F[0]?.total_tests," tests"]})]}),(0,a.jsxs)(l.Zb,{className:"text-center pt-12 pb-6 bg-gradient-to-b from-orange-100",children:[a.jsx("div",{className:"w-20 h-20 rounded-full bg-orange-300 flex items-center justify-center mx-auto mb-3",children:a.jsx("span",{className:"text-3xl font-bold text-orange-700",children:"3"})}),a.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 truncate px-2",children:F[2]?.user_email}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-primary mt-2",children:[F[2]?.average_score.toFixed(1),"%"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 dark:text-gray-500 mt-1",children:[F[2]?.total_tests," tests"]})]})]}),L&&R.length>0&&(0,a.jsxs)(l.Zb,{className:"mb-6 bg-blue-50 dark:bg-blue-900/20 border-blue-200",children:[(0,a.jsxs)("h2",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[a.jsx(g.Z,{className:"w-5 h-5 text-primary"}),"Your Position"]}),a.jsx("div",{className:"space-y-2",children:R.map(t=>{let r=t.user_email===e?.email;return(0,a.jsxs)("div",{className:`flex items-center justify-between p-3 rounded-lg ${r?"bg-primary text-white":"bg-white"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${r?"bg-white text-primary":"bg-gray-200 text-gray-700"}`,children:t.rank}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:`font-semibold ${r?"text-white":"text-gray-900"}`,children:[t.user_email,r&&a.jsx("span",{className:"ml-2 text-xs bg-white dark:bg-gray-800 text-primary px-2 py-1 rounded",children:"You"})]}),(0,a.jsxs)("div",{className:`text-xs ${r?"text-blue-100":"text-gray-600"}`,children:[t.total_tests," tests"]})]})]}),a.jsx("div",{className:"text-right",children:(0,a.jsxs)("div",{className:`text-xl font-bold ${r?"text-white":"text-primary"}`,children:[t.average_score.toFixed(1),"%"]})})]},t.rank)})})]}),(0,a.jsxs)(l.Zb,{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"All Rankings"}),a.jsx("div",{className:"space-y-2",children:t.map(t=>{let r=t.user_email===e?.email;return(0,a.jsxs)("div",{className:`flex items-center justify-between p-4 rounded-lg ${r?"bg-primary/10 border-2 border-primary":"bg-gray-50"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${r?"bg-primary text-white":"bg-gray-200 text-gray-700"}`,children:t.rank}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[t.user_email,r&&a.jsx("span",{className:"ml-2 text-xs bg-primary text-white px-2 py-1 rounded",children:"You"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 dark:text-gray-500",children:[t.total_tests," tests taken"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-primary",children:[t.average_score.toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 dark:text-gray-500",children:"Avg Score"})]})]},t.rank)})}),0===t.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(m.Z,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No Rankings Yet"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 dark:text-gray-500",children:"Take a quiz to appear on the leaderboard!"})]})]})]})}},37540:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`/app/web_app/frontend/src/app/dashboard/leaderboard/page.tsx#default`)},2560:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(17577);let s=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[196,325,434,938,101],()=>r(71587));module.exports=a})();