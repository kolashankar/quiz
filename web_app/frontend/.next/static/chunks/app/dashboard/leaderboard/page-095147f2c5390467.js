(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[692],{81307:function(e,t,a){Promise.resolve().then(a.bind(a,8941))},8941:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var r=a(57437),s=a(2265),l=a(88900),i=a(29923),d=a(14362),n=a(69064),c=a(94565);let x=s.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))});var o=a(16331),m=a(97503),g=a(69390);function h(){var e,t,a,h,y,b,u,j,v;let{user:f}=(0,d.a)(),[p,N]=(0,s.useState)([]),[k,w]=(0,s.useState)(!0),[_,S]=(0,s.useState)("all_time"),[Z,E]=(0,s.useState)("global"),[C,A]=(0,s.useState)([]),[F,L]=(0,s.useState)([]),[P,R]=(0,s.useState)(""),[M,T]=(0,s.useState)(""),[O,Y]=(0,s.useState)(!1),[B,W]=(0,s.useState)({totalParticipants:0,averageScore:0}),q=async()=>{try{let e={period:_,scope:Z};"exam"===Z&&P&&(e.exam_id=P),"subject"===Z&&M&&(e.subject_id=M);let t=await i.R.getFilteredLeaderboard(e);if(N(t.leaderboard||t),t.leaderboard&&Array.isArray(t.leaderboard)){let e=t.leaderboard.length,a=e>0?t.leaderboard.reduce((e,t)=>e+t.average_score,0)/e:0;W({totalParticipants:e,averageScore:a})}}catch(e){console.error("Error fetching leaderboard:",e),n.ZP.error("Failed to load leaderboard")}finally{w(!1)}},z=async()=>{try{let e=await i.R.getExams();A(e)}catch(e){console.error("Error fetching exams:",e)}},G=async e=>{try{let t=await i.R.getSubjects(e);L(t)}catch(e){console.error("Error fetching subjects:",e)}};(0,s.useEffect)(()=>{z()},[]),(0,s.useEffect)(()=>{"exam"===Z&&P&&G(P)},[P]),(0,s.useEffect)(()=>{q()},[_,Z,P,M]);let V=async()=>{w(!0),await q(),n.ZP.success("Leaderboard refreshed!")},D=e=>{E(e),R(""),T("")};if(k)return(0,r.jsx)(l.gb,{text:"Loading leaderboard..."});let H=p.slice(0,3);p.slice(3);let I=p.find(e=>e.user_email===(null==f?void 0:f.email)),J=I?p.slice(Math.max(0,(I.rank||0)-3),Math.min(p.length,(I.rank||0)+2)):[];return(0,r.jsxs)("div",{className:"p-4 md:p-6 lg:p-8 max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-gray-100",children:"Leaderboard"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 dark:text-gray-500 mt-2",children:"Compete with top learners"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("button",{onClick:()=>Y(!O),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 dark:text-gray-600 hover:bg-gray-200 dark:bg-gray-700 transition",children:[(0,r.jsx)(c.Z,{className:"w-5 h-5"}),"Filters"]}),(0,r.jsx)("button",{onClick:V,className:"px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary-dark transition",children:"Refresh"})]})]}),O&&(0,r.jsxs)(l.Zb,{className:"mb-6",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Filter Options"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-600 mb-2",children:"Time Period"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)("button",{onClick:()=>S("all_time"),className:"px-4 py-2 rounded-lg font-medium transition ".concat("all_time"===_?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"All Time"}),(0,r.jsx)("button",{onClick:()=>S("weekly"),className:"px-4 py-2 rounded-lg font-medium transition ".concat("weekly"===_?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"This Week"}),(0,r.jsx)("button",{onClick:()=>S("monthly"),className:"px-4 py-2 rounded-lg font-medium transition ".concat("monthly"===_?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"This Month"})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-600 mb-2",children:"Scope"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)("button",{onClick:()=>D("global"),className:"px-4 py-2 rounded-lg font-medium transition ".concat("global"===Z?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Global"}),(0,r.jsx)("button",{onClick:()=>D("exam"),className:"px-4 py-2 rounded-lg font-medium transition ".concat("exam"===Z?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"By Exam"}),(0,r.jsx)("button",{onClick:()=>D("subject"),className:"px-4 py-2 rounded-lg font-medium transition ".concat("subject"===Z?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"By Subject"})]})]}),("exam"===Z||"subject"===Z)&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-600 mb-2",children:"Select Exam"}),(0,r.jsxs)("select",{value:P,onChange:e=>R(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[(0,r.jsx)("option",{value:"",children:"All Exams"}),C.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),"subject"===Z&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 dark:text-gray-600 mb-2",children:"Select Subject"}),(0,r.jsxs)("select",{value:M,onChange:e=>T(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[(0,r.jsx)("option",{value:"",children:"All Subjects"}),F.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsx)(l.Zb,{children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:(0,r.jsx)(x,{className:"w-6 h-6 text-primary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 dark:text-gray-500",children:"Total Participants"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:B.totalParticipants})]})]})}),(0,r.jsx)(l.Zb,{children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-success/10 flex items-center justify-center",children:(0,r.jsx)(o.Z,{className:"w-6 h-6 text-success"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 dark:text-gray-500",children:"Average Score"}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[B.averageScore.toFixed(1),"%"]})]})]})}),(0,r.jsx)(l.Zb,{children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-warning/10 flex items-center justify-center",children:(0,r.jsx)(m.Z,{className:"w-6 h-6 text-warning"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 dark:text-gray-500",children:"Your Rank"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:I?"#".concat(I.rank):"N/A"})]})]})})]}),H.length>=3&&(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[(0,r.jsxs)(l.Zb,{className:"text-center pt-12 pb-6 bg-gradient-to-b from-gray-100",children:[(0,r.jsx)("div",{className:"w-20 h-20 rounded-full bg-gray-300 flex items-center justify-center mx-auto mb-3",children:(0,r.jsx)("span",{className:"text-3xl font-bold text-gray-700 dark:text-gray-300 dark:text-gray-600",children:"2"})}),(0,r.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 truncate px-2",children:null===(e=H[1])||void 0===e?void 0:e.user_email}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-primary mt-2",children:[null===(t=H[1])||void 0===t?void 0:t.average_score.toFixed(1),"%"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 dark:text-gray-500 mt-1",children:[null===(a=H[1])||void 0===a?void 0:a.total_tests," tests"]})]}),(0,r.jsxs)(l.Zb,{className:"text-center pt-8 pb-6 bg-gradient-to-b from-warning/20 relative",children:[(0,r.jsx)(m.Z,{className:"w-12 h-12 text-warning mx-auto mb-2"}),(0,r.jsx)("div",{className:"w-24 h-24 rounded-full bg-warning flex items-center justify-center mx-auto mb-3",children:(0,r.jsx)("span",{className:"text-4xl font-bold text-white",children:"1"})}),(0,r.jsx)("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 truncate px-2",children:null===(h=H[0])||void 0===h?void 0:h.user_email}),(0,r.jsxs)("div",{className:"text-3xl font-bold text-warning mt-2",children:[null===(y=H[0])||void 0===y?void 0:y.average_score.toFixed(1),"%"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 dark:text-gray-500 mt-1",children:[null===(b=H[0])||void 0===b?void 0:b.total_tests," tests"]})]}),(0,r.jsxs)(l.Zb,{className:"text-center pt-12 pb-6 bg-gradient-to-b from-orange-100",children:[(0,r.jsx)("div",{className:"w-20 h-20 rounded-full bg-orange-300 flex items-center justify-center mx-auto mb-3",children:(0,r.jsx)("span",{className:"text-3xl font-bold text-orange-700",children:"3"})}),(0,r.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 truncate px-2",children:null===(u=H[2])||void 0===u?void 0:u.user_email}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-primary mt-2",children:[null===(j=H[2])||void 0===j?void 0:j.average_score.toFixed(1),"%"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 dark:text-gray-500 mt-1",children:[null===(v=H[2])||void 0===v?void 0:v.total_tests," tests"]})]})]}),I&&J.length>0&&(0,r.jsxs)(l.Zb,{className:"mb-6 bg-blue-50 dark:bg-blue-900/20 border-blue-200",children:[(0,r.jsxs)("h2",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[(0,r.jsx)(g.Z,{className:"w-5 h-5 text-primary"}),"Your Position"]}),(0,r.jsx)("div",{className:"space-y-2",children:J.map(e=>{let t=e.user_email===(null==f?void 0:f.email);return(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg ".concat(t?"bg-primary text-white":"bg-white"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ".concat(t?"bg-white text-primary":"bg-gray-200 text-gray-700"),children:e.rank}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-semibold ".concat(t?"text-white":"text-gray-900"),children:[e.user_email,t&&(0,r.jsx)("span",{className:"ml-2 text-xs bg-white dark:bg-gray-800 text-primary px-2 py-1 rounded",children:"You"})]}),(0,r.jsxs)("div",{className:"text-xs ".concat(t?"text-blue-100":"text-gray-600"),children:[e.total_tests," tests"]})]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("div",{className:"text-xl font-bold ".concat(t?"text-white":"text-primary"),children:[e.average_score.toFixed(1),"%"]})})]},e.rank)})})]}),(0,r.jsxs)(l.Zb,{children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"All Rankings"}),(0,r.jsx)("div",{className:"space-y-2",children:p.map(e=>{let t=e.user_email===(null==f?void 0:f.email);return(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg ".concat(t?"bg-primary/10 border-2 border-primary":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold ".concat(t?"bg-primary text-white":"bg-gray-200 text-gray-700"),children:e.rank}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[e.user_email,t&&(0,r.jsx)("span",{className:"ml-2 text-xs bg-primary text-white px-2 py-1 rounded",children:"You"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 dark:text-gray-500",children:[e.total_tests," tests taken"]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-primary",children:[e.average_score.toFixed(1),"%"]}),(0,r.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 dark:text-gray-500",children:"Avg Score"})]})]},e.rank)})}),0===p.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(m.Z,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No Rankings Yet"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 dark:text-gray-500",children:"Take a quiz to appear on the leaderboard!"})]})]})]})}},94565:function(e,t,a){"use strict";var r=a(2265);let s=r.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))});t.Z=s}},function(e){e.O(0,[137,464,64,649,971,117,744],function(){return e(e.s=81307)}),_N_E=e.O()}]);