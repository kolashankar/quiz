(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{63583:function(t,e,r){Promise.resolve().then(r.bind(r,16117))},99376:function(t,e,r){"use strict";var o=r(35475);r.o(o,"useRouter")&&r.d(e,{useRouter:function(){return o.useRouter}})},16117:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return i}});var o=r(57437),n=r(2265),a=r(99376),s=r(5127),u=r(61241);function i(){let t=(0,a.useRouter)(),{user:e,isLoading:r}=(0,s.a)();return(0,n.useEffect)(()=>{r||(e?t.push("/dashboard"):t.push("/auth/login"))},[e,r,t]),(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)(u.$,{size:"lg"}),(0,o.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading..."})]})})}},61241:function(t,e,r){"use strict";r.d(e,{$:function(){return n}});var o=r(57437);function n(t){let{size:e="md",color:r="primary",className:n=""}=t;return(0,o.jsxs)("svg",{className:"animate-spin ".concat({sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"}[e]," ").concat({primary:"text-blue-600",white:"text-white",gray:"text-gray-600"}[r]," ").concat(n),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}r(2265)},5127:function(t,e,r){"use strict";r.d(e,{H:function(){return i},a:function(){return l}});var o=r(57437),n=r(2265),a=r(26647),s=r(69064);let u=(0,n.createContext)(void 0);function i(t){let{children:e}=t,[r,i]=(0,n.useState)(null),[l,c]=(0,n.useState)(!0),[d,h]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{let t=localStorage.getItem("auth_token");if(t){h(t);try{let t=await a.O.getCurrentUser();i(t)}catch(t){localStorage.removeItem("auth_token"),h(null)}}c(!1)})()},[]);let f=async t=>{try{c(!0);let e=await a.O.login(t);return h(e.token),i(e.user),localStorage.setItem("auth_token",e.token),s.ZP.success("Login successful!"),e}catch(t){throw s.ZP.error(t.message||"Login failed"),t}finally{c(!1)}};return(0,o.jsx)(u.Provider,{value:{user:r,token:d,isLoading:l,login:f,logout:()=>{i(null),h(null),localStorage.removeItem("auth_token"),s.ZP.success("Logged out successfully")}},children:e})}function l(){let t=(0,n.useContext)(u);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}},26647:function(t,e,r){"use strict";r.d(e,{O:function(){return n},h:function(){return o}});let o=r(83464).Z.create({baseURL:"http://localhost:8001/api",headers:{"Content-Type":"application/json"}});o.interceptors.request.use(t=>{let e=localStorage.getItem("auth_token");return e&&(t.headers.Authorization="Bearer ".concat(e)),t}),o.interceptors.response.use(t=>t,t=>{var e;return(null===(e=t.response)||void 0===e?void 0:e.status)===401&&(localStorage.removeItem("auth_token"),window.location.href="/auth/login"),Promise.reject(t)});let n={async login(t){try{return(await o.post("/auth/login",t)).data}catch(t){var e,r;throw Error((null===(r=t.response)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.error)||"Login failed")}},async register(t){try{return(await o.post("/auth/register",t)).data}catch(t){var e,r;throw Error((null===(r=t.response)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.error)||"Registration failed")}},async getCurrentUser(){try{return(await o.get("/auth/me")).data.user}catch(r){var t,e;throw Error((null===(e=r.response)||void 0===e?void 0:null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to get user")}},logout(){localStorage.removeItem("auth_token")}}}},function(t){t.O(0,[464,64,971,117,744],function(){return t(t.s=63583)}),_N_E=t.O()}]);