(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{20759:function(e,t,r){Promise.resolve().then(r.bind(r,23703))},23703:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var o=r(57437),n=r(39974),a=r.n(n);r(2778);var s=r(5127),l=r(2265);let u=(0,l.createContext)(void 0);function i(e){let{children:t}=e,[r,n]=(0,l.useState)("light");return(0,l.useEffect)(()=>{let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=e||(t?"dark":"light");n(r),"dark"===r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[]),(0,o.jsx)(u.Provider,{value:{theme:r,toggleTheme:()=>{let e="light"===r?"dark":"light";n(e),localStorage.setItem("theme",e),"dark"===e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}},children:t})}var c=r(69064);function d(e){let{children:t}=e;return(0,o.jsx)("html",{lang:"en",suppressHydrationWarning:!0,children:(0,o.jsx)("body",{className:a().className,children:(0,o.jsx)(i,{children:(0,o.jsxs)(s.H,{children:[t,(0,o.jsx)(c.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"var(--toast-bg)",color:"var(--toast-color)"}}})]})})})})}},5127:function(e,t,r){"use strict";r.d(t,{H:function(){return u},a:function(){return i}});var o=r(57437),n=r(2265),a=r(26647),s=r(69064);let l=(0,n.createContext)(void 0);function u(e){let{children:t}=e,[r,u]=(0,n.useState)(null),[i,c]=(0,n.useState)(!0),[d,h]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{let e=localStorage.getItem("auth_token");if(e){h(e);try{let e=await a.O.getCurrentUser();u(e)}catch(e){localStorage.removeItem("auth_token"),h(null)}}c(!1)})()},[]);let m=async e=>{try{c(!0);let t=await a.O.login(e);return h(t.token),u(t.user),localStorage.setItem("auth_token",t.token),s.ZP.success("Login successful!"),t}catch(e){throw s.ZP.error(e.message||"Login failed"),e}finally{c(!1)}};return(0,o.jsx)(l.Provider,{value:{user:r,token:d,isLoading:i,login:m,logout:()=>{u(null),h(null),localStorage.removeItem("auth_token"),s.ZP.success("Logged out successfully")}},children:t})}function i(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},26647:function(e,t,r){"use strict";r.d(t,{O:function(){return n},h:function(){return o}});let o=r(83464).Z.create({baseURL:"http://localhost:8001/api",headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),o.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("auth_token"),window.location.href="/auth/login"),Promise.reject(e)});let n={async login(e){try{return(await o.post("/auth/login",e)).data}catch(e){var t,r;throw Error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||"Login failed")}},async register(e){try{return(await o.post("/auth/register",e)).data}catch(e){var t,r;throw Error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||"Registration failed")}},async getCurrentUser(){try{return(await o.get("/auth/me")).data.user}catch(r){var e,t;throw Error((null===(t=r.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to get user")}},logout(){localStorage.removeItem("auth_token")}}},2778:function(){},39974:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[635,464,64,971,117,744],function(){return e(e.s=20759)}),_N_E=e.O()}]);