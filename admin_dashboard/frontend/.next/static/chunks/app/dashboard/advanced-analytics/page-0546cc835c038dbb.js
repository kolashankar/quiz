(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[807],{47646:function(e,s,t){Promise.resolve().then(t.bind(t,76698))},76698:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return S}});var a=t(57437),l=t(2265),i=t(26647),r=t(61241),d=t(47625),n=t(21156),c=t(56940),o=t(97059),x=t(62994),u=t(8147),m=t(22190),h=t(54061),v=t(75169),g=t(3574),y=t(20407),j=t(77031),p=t(31699),f=t(78931),N=t(34823),b=t(2174),w=t(16331);let k=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];function S(){var e,s,t,S,R,A,B,K,T,C,D,E,F,U,P,_,q,L,z,M;let[Z,$]=(0,l.useState)(!0),[H,I]=(0,l.useState)("30"),[O,Q]=(0,l.useState)("day"),[W,V]=(0,l.useState)(null),[G,J]=(0,l.useState)(null),[X,Y]=(0,l.useState)(null),[ee,es]=(0,l.useState)(null),[et,ea]=(0,l.useState)(null),el=(0,l.useCallback)(async()=>{$(!0);try{let[e,s,t,a,l]=await Promise.all([i.h.get("/admin/analytics/user-engagement?period=".concat(H)),i.h.get("/admin/analytics/question-difficulty-analysis"),i.h.get("/admin/analytics/success-rate-by-topic"),i.h.get("/admin/analytics/time-based-trends?period=".concat(H,"&groupBy=").concat(O)),i.h.get("/admin/analytics/performance-distribution")]);V(e.data),J(s.data),Y(t.data),es(a.data),ea(l.data)}catch(e){console.error("Error fetching analytics:",e)}finally{$(!1)}},[H,O]);return((0,l.useEffect)(()=>{el()},[el]),Z)?(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,a.jsx)(r.$,{size:"lg"})}):(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Advanced Analytics"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("select",{value:H,onChange:e=>I(e.target.value),className:"input",children:[(0,a.jsx)("option",{value:"7",children:"Last 7 days"}),(0,a.jsx)("option",{value:"30",children:"Last 30 days"}),(0,a.jsx)("option",{value:"90",children:"Last 90 days"})]}),(0,a.jsxs)("select",{value:O,onChange:e=>Q(e.target.value),className:"input",children:[(0,a.jsx)("option",{value:"day",children:"Daily"}),(0,a.jsx)("option",{value:"week",children:"Weekly"}),(0,a.jsx)("option",{value:"month",children:"Monthly"})]})]})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,a.jsx)(f.Z,{className:"h-6 w-6 mr-2 text-primary-600"}),"User Engagement"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(null==W?void 0:W.totalUsers)||0})]}),(0,a.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:(null==W?void 0:W.activeUsers)||0})]}),(0,a.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"New Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:(null==W?void 0:W.newUsers)||0})]}),(0,a.jsxs)("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Retention Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:[(null==W?void 0:W.retentionRate)||0,"%"]})]})]}),(0,a.jsx)(d.h,{width:"100%",height:300,children:(0,a.jsxs)(n.w,{data:(null==W?void 0:W.dailyActivity)||[],children:[(0,a.jsx)(c.q,{strokeDasharray:"3 3"}),(0,a.jsx)(o.K,{dataKey:"date"}),(0,a.jsx)(x.B,{}),(0,a.jsx)(u.u,{}),(0,a.jsx)(m.D,{}),(0,a.jsx)(h.x,{type:"monotone",dataKey:"activeUsers",stroke:"#8884d8",name:"Active Users"}),(0,a.jsx)(h.x,{type:"monotone",dataKey:"testsCount",stroke:"#82ca9d",name:"Tests"})]})})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,a.jsx)(N.Z,{className:"h-6 w-6 mr-2 text-primary-600"}),"Question Difficulty Analysis"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Difficulty Distribution"}),(0,a.jsx)(d.h,{width:"100%",height:250,children:(0,a.jsxs)(v.u,{children:[(0,a.jsx)(g.b,{data:[{name:"Easy",value:(null==G?void 0:null===(s=G.difficultyBreakdown)||void 0===s?void 0:null===(e=s.easy)||void 0===e?void 0:e.count)||0},{name:"Medium",value:(null==G?void 0:null===(S=G.difficultyBreakdown)||void 0===S?void 0:null===(t=S.medium)||void 0===t?void 0:t.count)||0},{name:"Hard",value:(null==G?void 0:null===(A=G.difficultyBreakdown)||void 0===A?void 0:null===(R=A.hard)||void 0===R?void 0:R.count)||0}],cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:s,percent:t}=e;return"".concat(s,": ").concat((100*t).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:"value",children:k.map((e,s)=>(0,a.jsx)(y.b,{fill:e},"cell-".concat(s)))}),(0,a.jsx)(u.u,{})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Average Success Rate by Difficulty"}),(0,a.jsx)(d.h,{width:"100%",height:250,children:(0,a.jsxs)(j.v,{data:[{difficulty:"Easy",successRate:parseFloat((null==G?void 0:null===(K=G.difficultyBreakdown)||void 0===K?void 0:null===(B=K.easy)||void 0===B?void 0:B.avgSuccessRate)||0)},{difficulty:"Medium",successRate:parseFloat((null==G?void 0:null===(C=G.difficultyBreakdown)||void 0===C?void 0:null===(T=C.medium)||void 0===T?void 0:T.avgSuccessRate)||0)},{difficulty:"Hard",successRate:parseFloat((null==G?void 0:null===(E=G.difficultyBreakdown)||void 0===E?void 0:null===(D=E.hard)||void 0===D?void 0:D.avgSuccessRate)||0)}],children:[(0,a.jsx)(c.q,{strokeDasharray:"3 3"}),(0,a.jsx)(o.K,{dataKey:"difficulty"}),(0,a.jsx)(x.B,{}),(0,a.jsx)(u.u,{}),(0,a.jsx)(p.$,{dataKey:"successRate",fill:"#82ca9d",name:"Success Rate (%)"})]})})]})]}),(0,a.jsx)("div",{className:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[(0,a.jsx)("strong",{children:"Mismatched Questions:"})," ",(null==G?void 0:G.mismatchedQuestions)||0," questions have difficulty levels that don't match their actual performance."]})})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,a.jsx)(b.Z,{className:"h-6 w-6 mr-2 text-primary-600"}),"Performance Trends"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Trend"}),(0,a.jsx)("p",{className:"text-xl font-bold capitalize",style:{color:(null==ee?void 0:null===(F=ee.summary)||void 0===F?void 0:F.trend)==="improving"?"#10b981":(null==ee?void 0:null===(U=ee.summary)||void 0===U?void 0:U.trend)==="declining"?"#ef4444":"#6b7280"},children:(null==ee?void 0:null===(P=ee.summary)||void 0===P?void 0:P.trend)||"N/A"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Tests"}),(0,a.jsx)("p",{className:"text-xl font-bold",children:(null==ee?void 0:null===(_=ee.summary)||void 0===_?void 0:_.totalTests)||0})]}),(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Score"}),(0,a.jsx)("p",{className:"text-xl font-bold",children:(null==ee?void 0:null===(q=ee.summary)||void 0===q?void 0:q.avgScore)||0})]}),(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Percentage"}),(0,a.jsxs)("p",{className:"text-xl font-bold",children:[(null==ee?void 0:null===(L=ee.summary)||void 0===L?void 0:L.avgPercentage)||0,"%"]})]})]}),(0,a.jsx)(d.h,{width:"100%",height:300,children:(0,a.jsxs)(n.w,{data:(null==ee?void 0:ee.trends)||[],children:[(0,a.jsx)(c.q,{strokeDasharray:"3 3"}),(0,a.jsx)(o.K,{dataKey:"date"}),(0,a.jsx)(x.B,{}),(0,a.jsx)(u.u,{}),(0,a.jsx)(m.D,{}),(0,a.jsx)(h.x,{type:"monotone",dataKey:"avgPercentage",stroke:"#8884d8",name:"Avg Percentage"}),(0,a.jsx)(h.x,{type:"monotone",dataKey:"testsCount",stroke:"#82ca9d",name:"Tests Count"})]})})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,a.jsx)(w.Z,{className:"h-6 w-6 mr-2 text-primary-600"}),"Success Rate by Topic"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-3 text-red-600",children:"Weakest Topics"}),(0,a.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:null==X?void 0:null===(z=X.weakestTopics)||void 0===z?void 0:z.slice(0,10).map((e,s)=>(0,a.jsxs)("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.topicName}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.examName," - ",e.subjectName]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,a.jsxs)("span",{className:"text-xs",children:["Success Rate: ",e.successRate,"%"]}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.totalAttempts," attempts"]})]})]},s))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-3 text-green-600",children:"Strongest Topics"}),(0,a.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:null==X?void 0:null===(M=X.strongestTopics)||void 0===M?void 0:M.slice(0,10).map((e,s)=>(0,a.jsxs)("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.topicName}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.examName," - ",e.subjectName]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,a.jsxs)("span",{className:"text-xs",children:["Success Rate: ",e.successRate,"%"]}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.totalAttempts," attempts"]})]})]},s))})]})]})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Performance Distribution"}),(0,a.jsx)(d.h,{width:"100%",height:300,children:(0,a.jsxs)(j.v,{data:(null==et?void 0:et.distribution)||[],children:[(0,a.jsx)(c.q,{strokeDasharray:"3 3"}),(0,a.jsx)(o.K,{dataKey:"range"}),(0,a.jsx)(x.B,{}),(0,a.jsx)(u.u,{}),(0,a.jsx)(m.D,{}),(0,a.jsx)(p.$,{dataKey:"count",fill:"#8884d8",name:"Number of Tests"})]})})]})]})}},61241:function(e,s,t){"use strict";t.d(s,{$:function(){return l}});var a=t(57437);function l(e){let{size:s="md",color:t="primary",className:l=""}=e;return(0,a.jsxs)("svg",{className:"animate-spin ".concat({sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"}[s]," ").concat({primary:"text-blue-600",white:"text-white",gray:"text-gray-600"}[t]," ").concat(l),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}t(2265)},26647:function(e,s,t){"use strict";t.d(s,{O:function(){return l},h:function(){return a}});let a=t(83464).Z.create({baseURL:"http://localhost:8001/api",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let s=localStorage.getItem("auth_token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e}),a.interceptors.response.use(e=>e,e=>{var s;return(null===(s=e.response)||void 0===s?void 0:s.status)===401&&(localStorage.removeItem("auth_token"),window.location.href="/auth/login"),Promise.reject(e)});let l={async login(e){try{return(await a.post("/auth/login",e)).data}catch(e){var s,t;throw Error((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.error)||"Login failed")}},async register(e){try{return(await a.post("/auth/register",e)).data}catch(e){var s,t;throw Error((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.error)||"Registration failed")}},async getCurrentUser(){try{return(await a.get("/auth/me")).data.user}catch(t){var e,s;throw Error((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.error)||"Failed to get user")}},logout(){localStorage.removeItem("auth_token")}}}},function(e){e.O(0,[464,652,687,788,971,117,744],function(){return e(e.s=47646)}),_N_E=e.O()}]);