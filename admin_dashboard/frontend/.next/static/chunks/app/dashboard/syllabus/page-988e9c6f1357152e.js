(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[722],{62686:function(e,t,a){Promise.resolve().then(a.bind(a,18479))},18479:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var r=a(57437),s=a(2265),l=a(43836),n=a(12087),i=a(61601),o=a(88203),d=a(69064),c=a(29501),u=a(83464);function m(){let[e,t]=(0,s.useState)([]),[a,m]=(0,s.useState)([]),[x,h]=(0,s.useState)(!0),[g,p]=(0,s.useState)(!1),[b,y]=(0,s.useState)(null),[f,v]=(0,s.useState)(!1),[j,w]=(0,s.useState)(""),{register:k,handleSubmit:N,reset:Z,setValue:S,watch:C,formState:{errors:E}}=(0,c.cI)(),L=C("examId");(0,s.useEffect)(()=>{I(),P()},[]);let I=async()=>{try{h(!0);let e=localStorage.getItem("token"),a=await u.Z.get("".concat("http://localhost:8001/api","/api/admin/syllabus"),{headers:{Authorization:"Bearer ".concat(e)}});t(a.data)}catch(t){var e,a;d.ZP.error((null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.error)||"Failed to fetch syllabuses")}finally{h(!1)}},P=async()=>{try{let e=localStorage.getItem("token"),t=await u.Z.get("".concat("http://localhost:8001/api","/api/admin/exams"),{headers:{Authorization:"Bearer ".concat(e)}});m(t.data)}catch(e){d.ZP.error("Failed to fetch exams")}},F=e=>{y(e),w(""),Z({examId:e.examId,title:e.title,content:e.content,aiGenerated:e.aiGenerated}),p(!0)},A=async e=>{if(confirm('Are you sure you want to delete "'.concat(e.title,'"?')))try{let t=localStorage.getItem("token");await u.Z.delete("".concat("http://localhost:8001/api","/api/admin/syllabus/").concat(e.id),{headers:{Authorization:"Bearer ".concat(t)}}),d.ZP.success("Syllabus deleted successfully"),I()}catch(e){var t,a;d.ZP.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)||"Failed to delete syllabus")}},B=async()=>{if(!L){d.ZP.error("Please select an exam first");return}let e=a.find(e=>e.id===L);if(e){v(!0);try{let t=localStorage.getItem("token"),a=(await u.Z.post("".concat("http://localhost:8001/api","/api/admin/syllabus/generate-ai"),{examName:e.name},{headers:{Authorization:"Bearer ".concat(t)}})).data.generatedContent;w(a),S("content",a),S("aiGenerated",!0),d.ZP.success("Syllabus generated successfully!")}catch(e){var t,r;d.ZP.error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||"Failed to generate syllabus")}finally{v(!1)}}},z=async e=>{try{let t=localStorage.getItem("token");b?(await u.Z.put("".concat("http://localhost:8001/api","/api/admin/syllabus/").concat(b.id),e,{headers:{Authorization:"Bearer ".concat(t)}}),d.ZP.success("Syllabus updated successfully")):(await u.Z.post("".concat("http://localhost:8001/api","/api/admin/syllabus"),e,{headers:{Authorization:"Bearer ".concat(t)}}),d.ZP.success("Syllabus created successfully")),p(!1),I()}catch(e){var t,a;d.ZP.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)||"Failed to save syllabus")}};return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Exam Syllabuses"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Manage exam syllabuses manually or generate them using AI"})]}),(0,r.jsx)("div",{className:"mb-4 flex justify-between items-center",children:(0,r.jsxs)("button",{onClick:()=>{y(null),w(""),Z({examId:"",title:"",content:"",aiGenerated:!1}),p(!0)},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[(0,r.jsx)(l.Z,{className:"w-5 h-5 mr-2"}),"Add Syllabus"]})}),x?(0,r.jsx)("div",{className:"text-center py-8",children:"Loading..."}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>{var t;return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.title}),e.aiGenerated&&(0,r.jsxs)("span",{className:"flex items-center text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded",children:[(0,r.jsx)(n.Z,{className:"w-3 h-3 mr-1"}),"AI"]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:(null===(t=e.exam)||void 0===t?void 0:t.name)||"Unknown Exam"}),(0,r.jsxs)("div",{className:"text-sm text-gray-700 dark:text-gray-300 mb-4 line-clamp-3",children:[e.content.substring(0,150),"..."]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,r.jsx)("button",{onClick:()=>F(e),className:"flex-1 px-3 py-2 text-sm bg-blue-50 text-blue-600 rounded hover:bg-blue-100 transition",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>A(e),className:"px-3 py-2 text-sm bg-red-50 text-red-600 rounded hover:bg-red-100 transition",children:(0,r.jsx)(i.Z,{className:"w-4 h-4"})})]})]},e.id)})}),0===e.length&&!x&&(0,r.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No syllabuses found. Create one to get started!"}),(0,r.jsx)(o.u,{isOpen:g,onClose:()=>p(!1),title:b?"Edit Syllabus":"Create Syllabus",children:(0,r.jsxs)("form",{onSubmit:N(z),className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Exam ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{...k("examId",{required:"Exam is required"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[(0,r.jsx)("option",{value:"",children:"Select Exam"}),a.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]}),E.examId&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:E.examId.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Title ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",...k("title",{required:"Title is required"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"e.g., Complete UPSC Syllabus 2024"}),E.title&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:E.title.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Content ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("button",{type:"button",onClick:B,disabled:f||!L,className:"flex items-center px-3 py-1 text-sm bg-purple-600 text-white rounded hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,r.jsx)(n.Z,{className:"w-4 h-4 mr-1"}),f?"Generating...":"Generate with AI"]})]}),(0,r.jsx)("textarea",{...k("content",{required:"Content is required"}),rows:12,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white font-mono text-sm",placeholder:"Syllabus content (supports Markdown)..."}),E.content&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:E.content.message})]}),(0,r.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>p(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:b?"Update":"Create"})]})]})})]})}},88203:function(e,t,a){"use strict";a.d(t,{u:function(){return d}});var r=a(57437),s=a(2265),l=a(33044),n=a(93109),i=a(77165);let o={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl"};function d(e){let{isOpen:t,onClose:a,title:d,children:c,size:u="md"}=e;return(0,r.jsx)(l.u,{appear:!0,show:t,as:s.Fragment,children:(0,r.jsxs)(n.V,{as:"div",className:"relative z-50",onClose:a,children:[(0,r.jsx)(l.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25 dark:bg-opacity-50"})}),(0,r.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,r.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,r.jsx)(l.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,r.jsxs)(n.V.Panel,{className:"w-full ".concat(o[u]," transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 text-left align-middle shadow-xl transition-all"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)(n.V.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white",children:d}),(0,r.jsx)("button",{type:"button",className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",onClick:a,children:(0,r.jsx)(i.Z,{className:"h-6 w-6"})})]}),(0,r.jsx)("div",{children:c})]})})})})]})})}},43836:function(e,t,a){"use strict";var r=a(2265);let s=r.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});t.Z=s},12087:function(e,t,a){"use strict";var r=a(2265);let s=r.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))});t.Z=s},61601:function(e,t,a){"use strict";var r=a(2265);let s=r.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});t.Z=s}},function(e){e.O(0,[464,64,501,67,971,117,744],function(){return e(e.s=62686)}),_N_E=e.O()}]);