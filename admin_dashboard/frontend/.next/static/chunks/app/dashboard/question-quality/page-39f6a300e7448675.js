(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[519],{5147:function(e,t,s){Promise.resolve().then(s.bind(s,50665))},50665:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(57437),r=s(2265),i=s(26647),l=s(61241);let n=r.forwardRef(function(e,t){let{title:s,titleId:a,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},i),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}),d=r.forwardRef(function(e,t){let{title:s,titleId:a,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},i),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"}))}),c=r.forwardRef(function(e,t){let{title:s,titleId:a,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},i),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}),o=r.forwardRef(function(e,t){let{title:s,titleId:a,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},i),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))});var u=s(69390);function m(){var e;let[t,s]=(0,r.useState)(!1),[m,x]=(0,r.useState)("review"),[h,v]=(0,r.useState)([]),[p,g]=(0,r.useState)([]),[y,f]=(0,r.useState)(null),[j,b]=(0,r.useState)([]),[w,N]=(0,r.useState)(null);(0,r.useEffect)(()=>{"review"===m&&k(),"flagged"===m&&q()},[m]);let k=async()=>{s(!0);try{let e=await i.h.get("/admin/question-quality/review-queue?limit=20");v(e.data.questions||[])}catch(e){console.error("Error fetching review queue:",e)}finally{s(!1)}},q=async()=>{s(!0);try{let e=await i.h.get("/admin/question-quality/flagged?status=pending");g(e.data.flaggedQuestions||[])}catch(e){console.error("Error fetching flagged questions:",e)}finally{s(!1)}},E=async()=>{s(!0);try{let e=await i.h.post("/admin/question-quality/auto-adjust-difficulty",{minAttempts:10});f(e.data),N({type:"success",text:e.data.message})}catch(s){var e,t;N({type:"error",text:(null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Auto-adjustment failed"})}finally{s(!1)}},C=async()=>{s(!0);try{let e=await i.h.post("/admin/question-quality/detect-duplicates",{threshold:.8});b(e.data.duplicateGroups||[]),N({type:"success",text:"Found ".concat(e.data.totalGroups," groups of duplicate questions")})}catch(s){var e,t;N({type:"error",text:(null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Duplicate detection failed"})}finally{s(!1)}},A=async(e,t,s)=>{try{await i.h.put("/admin/question-quality/flagged/".concat(e),{status:t,reviewNotes:s}),N({type:"success",text:"Status updated successfully"}),q()}catch(e){N({type:"error",text:"Failed to update status"})}};return(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Question Quality Tools"}),w&&(0,a.jsx)("div",{className:"p-4 rounded-lg ".concat("success"===w.type?"bg-green-50 text-green-800":"bg-red-50 text-red-800"),children:w.text}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("nav",{className:"flex space-x-8 px-6 pt-6","aria-label":"Tabs",children:[{id:"review",name:"Review Queue",icon:n},{id:"flagged",name:"Flagged Questions",icon:d},{id:"adjust",name:"Auto-Adjust Difficulty",icon:c},{id:"duplicates",name:"Duplicate Detection",icon:o}].map(e=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:()=>x(e.id),className:"".concat(m===e.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"," flex items-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:[(0,a.jsx)(t,{className:"h-5 w-5 mr-2"}),e.name]},e.id)})})}),(0,a.jsxs)("div",{className:"p-6",children:["review"===m&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Recently Added Questions"}),(0,a.jsx)("button",{onClick:k,className:"btn-secondary text-sm",children:"Refresh"})]}),t?(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)(l.$,{size:"lg"})}):0===h.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No questions in review queue"}):(0,a.jsx)("div",{className:"space-y-3",children:h.map((e,t)=>{var s,r,i,l,n,d,c,o,m,x,h,v,p,g,y,f;return(0,a.jsx)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.text}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-600 dark:text-gray-400",children:[(0,a.jsx)("span",{className:"badge badge-{q.difficulty === 'easy' ? 'success' : q.difficulty === 'hard' ? 'danger' : 'warning'}",children:e.difficulty}),(0,a.jsxs)("span",{children:[null===(c=e.subsection)||void 0===c?void 0:null===(d=c.section)||void 0===d?void 0:null===(n=d.subtopic)||void 0===n?void 0:null===(l=n.topic)||void 0===l?void 0:null===(i=l.chapter)||void 0===i?void 0:null===(r=i.subject)||void 0===r?void 0:null===(s=r.exam)||void 0===s?void 0:s.name," - ",null===(p=e.subsection)||void 0===p?void 0:null===(v=p.section)||void 0===v?void 0:null===(h=v.subtopic)||void 0===h?void 0:null===(x=h.topic)||void 0===x?void 0:null===(m=x.chapter)||void 0===m?void 0:null===(o=m.subject)||void 0===o?void 0:o.name]}),(0,a.jsxs)("span",{children:["Attempts: ",(null===(g=e.statistics)||void 0===g?void 0:g.attemptCount)||0]}),(0,a.jsxs)("span",{children:["Success: ",(null===(y=e.statistics)||void 0===y?void 0:y.successRate)||0,"%"]})]})]}),(0,a.jsx)("div",{className:"ml-4",children:(null===(f=e.statistics)||void 0===f?void 0:f.attemptCount)>0&&(0,a.jsxs)("div",{className:"flex items-center text-yellow-600",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"ml-1 text-sm",children:"Quality Score Available"})]})})]})},t)})})]}),"flagged"===m&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Flagged Questions"}),(0,a.jsx)("button",{onClick:q,className:"btn-secondary text-sm",children:"Refresh"})]}),t?(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)(l.$,{size:"lg"})}):0===p.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No flagged questions"}):(0,a.jsx)("div",{className:"space-y-4",children:p.map((e,t)=>{var s;return(0,a.jsx)("div",{className:"border border-red-200 dark:border-red-700 rounded-lg p-4 bg-red-50 dark:bg-red-900/10",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:(null===(s=e.question)||void 0===s?void 0:s.text)||"Question not found"}),(0,a.jsxs)("div",{className:"mt-2 space-y-1 text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Reason:"})," ",e.reason]}),e.description&&(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Description:"})," ",e.description]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Flagged on: ",new Date(e.createdAt).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"ml-4 flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>A(e.id,"resolved","Issue resolved"),className:"btn-success text-xs",children:"Resolve"}),(0,a.jsx)("button",{onClick:()=>A(e.id,"rejected","Not an issue"),className:"btn-secondary text-xs",children:"Reject"})]})]})},t)})})]}),"adjust"===m&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Auto-Adjust Question Difficulty"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Automatically adjust question difficulty levels based on success rates:"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-600 dark:text-gray-400 list-disc list-inside space-y-1",children:[(0,a.jsx)("li",{children:"Success rate > 80% → Easy"}),(0,a.jsx)("li",{children:"Success rate 50-80% → Medium"}),(0,a.jsx)("li",{children:"Success rate < 50% → Hard"})]}),(0,a.jsx)("button",{onClick:E,disabled:t,className:"btn-primary",children:t?(0,a.jsx)(l.$,{size:"sm"}):"Run Auto-Adjustment"}),y&&(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,a.jsx)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:(0,a.jsxs)("p",{className:"font-medium",children:["Adjusted ",y.adjustedCount," questions"]})}),(null===(e=y.adjustments)||void 0===e?void 0:e.length)>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Adjustments Made:"}),y.adjustments.slice(0,10).map((e,t)=>(0,a.jsxs)("div",{className:"p-3 border border-gray-200 dark:border-gray-700 rounded",children:[(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{className:"badge badge-secondary",children:e.oldDifficulty})," → ",(0,a.jsx)("span",{className:"badge badge-primary",children:e.newDifficulty})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["Success Rate: ",e.successRate,"% | Attempts: ",e.attemptCount]})]},t))]})]})]}),"duplicates"===m&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"AI-Powered Duplicate Detection"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Uses Gemini AI to detect semantically similar questions, not just exact matches."}),(0,a.jsx)("button",{onClick:C,disabled:t,className:"btn-primary",children:t?(0,a.jsx)(l.$,{size:"sm"}):"Detect Duplicates"}),j.length>0&&(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,a.jsxs)("h4",{className:"font-medium",children:["Found ",j.length," groups of similar questions:"]}),j.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"border border-yellow-200 dark:border-yellow-700 rounded-lg p-4 bg-yellow-50 dark:bg-yellow-900/10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("p",{className:"font-medium",children:["Group ",t+1]}),(0,a.jsxs)("span",{className:"badge badge-warning",children:["Similarity: ",(100*e.similarityScore).toFixed(0),"%"]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:e.reason}),(0,a.jsx)("div",{className:"space-y-2",children:null===(s=e.questions)||void 0===s?void 0:s.map((e,t)=>(0,a.jsxs)("div",{className:"p-3 bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("p",{className:"text-sm",children:e.text}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.exam," - ",e.subject," | Difficulty: ",e.difficulty]})]},t))})]},t)})]})]})]})]})]})}},61241:function(e,t,s){"use strict";s.d(t,{$:function(){return r}});var a=s(57437);function r(e){let{size:t="md",color:s="primary",className:r=""}=e;return(0,a.jsxs)("svg",{className:"animate-spin ".concat({sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"}[t]," ").concat({primary:"text-blue-600",white:"text-white",gray:"text-gray-600"}[s]," ").concat(r),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}s(2265)},26647:function(e,t,s){"use strict";s.d(t,{O:function(){return r},h:function(){return a}});let a=s(83464).Z.create({baseURL:"http://localhost:8001/api",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),a.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("auth_token"),window.location.href="/auth/login"),Promise.reject(e)});let r={async login(e){try{return(await a.post("/auth/login",e)).data}catch(e){var t,s;throw Error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Login failed")}},async register(e){try{return(await a.post("/auth/register",e)).data}catch(e){var t,s;throw Error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Registration failed")}},async getCurrentUser(){try{return(await a.get("/auth/me")).data.user}catch(s){var e,t;throw Error((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to get user")}},logout(){localStorage.removeItem("auth_token")}}},69390:function(e,t,s){"use strict";var a=s(2265);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))});t.Z=r}},function(e){e.O(0,[464,971,117,744],function(){return e(e.s=5147)}),_N_E=e.O()}]);