(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[868],{56461:function(e,t,a){Promise.resolve().then(a.bind(a,29409))},29409:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var s=a(57437),n=a(2265),r=a(26647),i=a(61241);let l=n.forwardRef(function(e,t){let{title:a,titleId:s,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"}))}),c=n.forwardRef(function(e,t){let{title:a,titleId:s,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))});var o=a(23121),d=a(20322);function u(){var e,t,a,u,m,h,p;let[x,g]=(0,n.useState)(!1),[v,y]=(0,n.useState)("announcements"),[f,j]=(0,n.useState)([]),[N,b]=(0,n.useState)({title:"",content:"",type:"info",priority:"normal",expiresAt:""}),[w,C]=(0,n.useState)([]),[k,S]=(0,n.useState)({name:"",subject:"",htmlContent:"",scheduledAt:""}),[A,E]=(0,n.useState)({title:"",body:""}),[L,T]=(0,n.useState)([]),[M,P]=(0,n.useState)({title:"",body:"",scheduledAt:""}),[_,B]=(0,n.useState)(null),[z,O]=(0,n.useState)(null);(0,n.useEffect)(()=>{R(),"announcements"===v&&q(),"emails"===v&&F(),"scheduled"===v&&W()},[v]);let R=async()=>{try{let e=await r.h.get("/admin/communication/statistics");B(e.data)}catch(e){console.error("Error fetching stats:",e)}},q=async()=>{g(!0);try{let e=await r.h.get("/admin/communication/announcements");j(e.data.announcements||[])}catch(e){console.error("Error fetching announcements:",e)}finally{g(!1)}},F=async()=>{g(!0);try{let e=await r.h.get("/admin/communication/email-campaigns");C(e.data.campaigns||[])}catch(e){console.error("Error fetching campaigns:",e)}finally{g(!1)}},W=async()=>{g(!0);try{let e=await r.h.get("/admin/communication/scheduled-notifications");T(e.data.scheduled||[])}catch(e){console.error("Error fetching scheduled notifications:",e)}finally{g(!1)}},Z=async()=>{if(!N.title||!N.content){O({type:"error",text:"Title and content are required"});return}g(!0);try{await r.h.post("/admin/communication/announcements",N),O({type:"success",text:"Announcement created successfully"}),b({title:"",content:"",type:"info",priority:"normal",expiresAt:""}),q(),R()}catch(a){var e,t;O({type:"error",text:(null===(t=a.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to create announcement"})}finally{g(!1)}},$=async()=>{if(!k.name||!k.subject||!k.htmlContent){O({type:"error",text:"Name, subject, and content are required"});return}g(!0);try{await r.h.post("/admin/communication/email-campaign",k),O({type:"success",text:"Email campaign created successfully"}),S({name:"",subject:"",htmlContent:"",scheduledAt:""}),F(),R()}catch(a){var e,t;O({type:"error",text:(null===(t=a.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to create campaign"})}finally{g(!1)}},H=async()=>{if(!A.title||!A.body){O({type:"error",text:"Title and body are required"});return}g(!0);try{await r.h.post("/admin/communication/notifications/send",A),O({type:"success",text:"Notification sent successfully"}),E({title:"",body:""}),R()}catch(a){var e,t;O({type:"error",text:(null===(t=a.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to send notification"})}finally{g(!1)}},I=async()=>{if(!M.title||!M.body||!M.scheduledAt){O({type:"error",text:"All fields are required"});return}g(!0);try{await r.h.post("/admin/communication/schedule-notification",M),O({type:"success",text:"Notification scheduled successfully"}),P({title:"",body:"",scheduledAt:""}),W(),R()}catch(a){var e,t;O({type:"error",text:(null===(t=a.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to schedule notification"})}finally{g(!1)}},U=async e=>{if(confirm("Are you sure you want to send this email campaign to all users?")){g(!0);try{let t=await r.h.post("/admin/communication/email-campaign/".concat(e,"/send"));O({type:"success",text:t.data.message}),F()}catch(e){var t,a;O({type:"error",text:(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)||"Failed to send campaign"})}finally{g(!1)}}};return(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Communication Tools"}),_&&(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Announcements"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:(null===(e=_.announcements)||void 0===e?void 0:e.total)||0}),(0,s.jsxs)("p",{className:"text-xs text-green-600",children:["Active: ",(null===(t=_.announcements)||void 0===t?void 0:t.active)||0]})]}),(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email Campaigns"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:(null===(a=_.emailCampaigns)||void 0===a?void 0:a.total)||0}),(0,s.jsxs)("p",{className:"text-xs text-green-600",children:["Sent: ",(null===(u=_.emailCampaigns)||void 0===u?void 0:u.sent)||0]})]}),(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Notifications"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:(null===(m=_.notifications)||void 0===m?void 0:m.total)||0}),(0,s.jsxs)("p",{className:"text-xs text-green-600",children:["Sent: ",(null===(h=_.notifications)||void 0===h?void 0:h.sent)||0]})]}),(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Scheduled"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(null===(p=_.notifications)||void 0===p?void 0:p.scheduled)||0})]})]}),z&&(0,s.jsx)("div",{className:"p-4 rounded-lg ".concat("success"===z.type?"bg-green-50 text-green-800":"bg-red-50 text-red-800"),children:z.text}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,s.jsx)("nav",{className:"flex space-x-8 px-6 pt-6","aria-label":"Tabs",children:[{id:"announcements",name:"Announcements",icon:l},{id:"emails",name:"Email Campaigns",icon:c},{id:"notifications",name:"Push Notifications",icon:o.Z},{id:"scheduled",name:"Scheduled",icon:d.Z}].map(e=>{let t=e.icon;return(0,s.jsxs)("button",{onClick:()=>y(e.id),className:"".concat(v===e.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500"," flex items-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),children:[(0,s.jsx)(t,{className:"h-5 w-5 mr-2"}),e.name]},e.id)})})}),(0,s.jsxs)("div",{className:"p-6",children:["announcements"===v&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg space-y-4",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Create New Announcement"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Title",value:N.title,onChange:e=>b({...N,title:e.target.value}),className:"input"}),(0,s.jsxs)("select",{value:N.type,onChange:e=>b({...N,type:e.target.value}),className:"input",children:[(0,s.jsx)("option",{value:"info",children:"Info"}),(0,s.jsx)("option",{value:"success",children:"Success"}),(0,s.jsx)("option",{value:"warning",children:"Warning"}),(0,s.jsx)("option",{value:"error",children:"Error"})]}),(0,s.jsxs)("select",{value:N.priority,onChange:e=>b({...N,priority:e.target.value}),className:"input",children:[(0,s.jsx)("option",{value:"low",children:"Low Priority"}),(0,s.jsx)("option",{value:"normal",children:"Normal Priority"}),(0,s.jsx)("option",{value:"high",children:"High Priority"}),(0,s.jsx)("option",{value:"urgent",children:"Urgent"})]}),(0,s.jsx)("input",{type:"datetime-local",value:N.expiresAt,onChange:e=>b({...N,expiresAt:e.target.value}),className:"input",placeholder:"Expires at (optional)"})]}),(0,s.jsx)("textarea",{placeholder:"Content",value:N.content,onChange:e=>b({...N,content:e.target.value}),className:"input",rows:4}),(0,s.jsx)("button",{onClick:Z,disabled:x,className:"btn-primary",children:x?(0,s.jsx)(i.$,{size:"sm"}):"Create Announcement"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Recent Announcements"}),f.map(e=>(0,s.jsx)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:(0,s.jsx)("div",{className:"flex justify-between items-start",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-medium",children:e.title}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.content}),(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,s.jsx)("span",{className:"badge badge-".concat(e.type),children:e.type}),(0,s.jsx)("span",{className:"badge badge-secondary",children:e.priority}),e.isActive&&(0,s.jsx)("span",{className:"badge badge-success",children:"Active"})]})]})})},e.id))]})]}),"emails"===v&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"ℹ️ Email service is configured with sample SMTP credentials. Update .env file with your actual SMTP settings for production use."})}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg space-y-4",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Create Email Campaign"}),(0,s.jsx)("input",{type:"text",placeholder:"Campaign Name",value:k.name,onChange:e=>S({...k,name:e.target.value}),className:"input"}),(0,s.jsx)("input",{type:"text",placeholder:"Email Subject",value:k.subject,onChange:e=>S({...k,subject:e.target.value}),className:"input"}),(0,s.jsx)("textarea",{placeholder:"HTML Content",value:k.htmlContent,onChange:e=>S({...k,htmlContent:e.target.value}),className:"input",rows:6}),(0,s.jsx)("input",{type:"datetime-local",value:k.scheduledAt,onChange:e=>S({...k,scheduledAt:e.target.value}),className:"input",placeholder:"Schedule for later (optional)"}),(0,s.jsx)("button",{onClick:$,disabled:x,className:"btn-primary",children:x?(0,s.jsx)(i.$,{size:"sm"}):"Create Campaign"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Campaigns"}),w.map(e=>(0,s.jsx)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Subject: ",e.subject]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,s.jsx)("span",{className:"badge badge-".concat("sent"===e.status?"success":"draft"===e.status?"secondary":"warning"),children:e.status}),"sent"===e.status&&(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["Sent: ",e.successCount,"/",e.recipientCount]})]})]}),"draft"===e.status&&(0,s.jsx)("button",{onClick:()=>U(e.id),className:"btn-primary text-xs",children:"Send Now"})]})},e.id))]})]}),"notifications"===v&&(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg space-y-4",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Send Push Notification"}),(0,s.jsx)("input",{type:"text",placeholder:"Title",value:A.title,onChange:e=>E({...A,title:e.target.value}),className:"input"}),(0,s.jsx)("textarea",{placeholder:"Body",value:A.body,onChange:e=>E({...A,body:e.target.value}),className:"input",rows:3}),(0,s.jsx)("button",{onClick:H,disabled:x,className:"btn-primary",children:x?(0,s.jsx)(i.$,{size:"sm"}):"Send Notification"})]})}),"scheduled"===v&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg space-y-4",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Schedule Notification"}),(0,s.jsx)("input",{type:"text",placeholder:"Title",value:M.title,onChange:e=>P({...M,title:e.target.value}),className:"input"}),(0,s.jsx)("textarea",{placeholder:"Body",value:M.body,onChange:e=>P({...M,body:e.target.value}),className:"input",rows:3}),(0,s.jsx)("input",{type:"datetime-local",value:M.scheduledAt,onChange:e=>P({...M,scheduledAt:e.target.value}),className:"input",required:!0}),(0,s.jsx)("button",{onClick:I,disabled:x,className:"btn-primary",children:x?(0,s.jsx)(i.$,{size:"sm"}):"Schedule Notification"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Scheduled Notifications"}),L.map(e=>(0,s.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-medium",children:e.title}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.body}),(0,s.jsxs)("div",{className:"flex gap-2 mt-2 text-xs",children:[(0,s.jsx)("span",{className:"badge badge-".concat("sent"===e.status?"success":"warning"),children:e.status}),(0,s.jsxs)("span",{className:"text-gray-500",children:["scheduled"===e.status?"Scheduled for":"Sent at",": ",new Date("scheduled"===e.status?e.scheduledAt:e.sentAt).toLocaleString()]})]})]},e.id))]})]})]})]})]})}},61241:function(e,t,a){"use strict";a.d(t,{$:function(){return n}});var s=a(57437);function n(e){let{size:t="md",color:a="primary",className:n=""}=e;return(0,s.jsxs)("svg",{className:"animate-spin ".concat({sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"}[t]," ").concat({primary:"text-blue-600",white:"text-white",gray:"text-gray-600"}[a]," ").concat(n),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}a(2265)},26647:function(e,t,a){"use strict";a.d(t,{O:function(){return n},h:function(){return s}});let s=a(83464).Z.create({baseURL:"http://localhost:8001/api",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),s.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("auth_token"),window.location.href="/auth/login"),Promise.reject(e)});let n={async login(e){try{return(await s.post("/auth/login",e)).data}catch(e){var t,a;throw Error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)||"Login failed")}},async register(e){try{return(await s.post("/auth/register",e)).data}catch(e){var t,a;throw Error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)||"Registration failed")}},async getCurrentUser(){try{return(await s.get("/auth/me")).data.user}catch(a){var e,t;throw Error((null===(t=a.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to get user")}},logout(){localStorage.removeItem("auth_token")}}},23121:function(e,t,a){"use strict";var s=a(2265);let n=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))});t.Z=n},20322:function(e,t,a){"use strict";var s=a(2265);let n=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=n}},function(e){e.O(0,[464,971,117,744],function(){return e(e.s=56461)}),_N_E=e.O()}]);