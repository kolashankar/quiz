(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[171],{65779:function(e,t,s){Promise.resolve().then(s.bind(s,65766))},65766:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var a={};s.r(a);var r=s(57437),l=s(2265),i=s(5127),n=s(26647),c=s(61241),o=s(12087);let d=l.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?l.createElement("title",{id:a},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))});var u=s(34823),x=s(23167),h=s(16331),m=s(42548);let v=l.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?l.createElement("title",{id:a},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))});var g=s(47625),f=s(77031),j=s(56940),p=s(97059),w=s(62994),y=s(8147),b=s(31699),N=s(75169),k=s(3574),E=s(20407),L=s(22190),C=s(27648);function S(){let{user:e}=(0,i.a)(),[t,s]=(0,l.useState)(null),[S,Z]=(0,l.useState)(!0),[A,B]=(0,l.useState)("7d"),[M,_]=(0,l.useState)(""),[D,I]=(0,l.useState)(!1);(0,l.useEffect)(()=>{O()},[A]);let O=async()=>{try{Z(!0);let e=await n.h.get("/admin/analytics/dashboard");s(e.data)}catch(e){console.error("Error fetching analytics:",e)}finally{Z(!1)}},P=async()=>{try{I(!0);let e=await n.h.post("/admin/analytics/ai-suggestions",{type:"content-analysis",context:{timeRange:A}});_(e.data.suggestions)}catch(e){console.error("Error fetching AI insights:",e)}finally{I(!1)}},T=()=>(null==t?void 0:t.statistics.difficultyDistribution)?t.statistics.difficultyDistribution.map(e=>({difficulty:e.difficulty.charAt(0).toUpperCase()+e.difficulty.slice(1),count:e._count.id,fill:"easy"===e.difficulty?"#10B981":"medium"===e.difficulty?"#F59E0B":"#EF4444"})):[];return S?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,r.jsx)(c.$,{size:"lg"})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:(0,r.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Analytics Dashboard"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Comprehensive insights and performance metrics"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("select",{value:A,onChange:e=>B(e.target.value),className:"input",children:[(0,r.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,r.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,r.jsx)("option",{value:"90d",children:"Last 90 days"}),(0,r.jsx)("option",{value:"1y",children:"Last year"})]}),(0,r.jsxs)("button",{onClick:P,disabled:D,className:"btn-primary flex items-center space-x-2",children:[(0,r.jsx)(o.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:D?"Analyzing...":"AI Insights"})]})]})]}),(0,r.jsx)("nav",{className:"flex mt-4",children:(0,r.jsxs)("ol",{className:"flex items-center space-x-2",children:[(0,r.jsx)("li",{children:(0,r.jsx)(C.default,{href:"/dashboard",className:"text-gray-500 hover:text-gray-700",children:"Dashboard"})}),(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"mx-2",children:"/"}),(0,r.jsx)("span",{children:"Analytics"})]})]})})]})}),(0,r.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,r.jsx)("div",{className:"card p-6 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d,{className:"h-8 w-8"}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-blue-100",children:"Total Users"}),(0,r.jsx)("p",{className:"text-3xl font-bold",children:(null==t?void 0:t.overview.totalUsers)||0})]})]})}),(0,r.jsx)("div",{className:"card p-6 bg-gradient-to-r from-green-500 to-green-600 text-white",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(u.Z,{className:"h-8 w-8"}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-green-100",children:"Total Exams"}),(0,r.jsx)("p",{className:"text-3xl font-bold",children:(null==t?void 0:t.overview.totalExams)||0})]})]})}),(0,r.jsx)("div",{className:"card p-6 bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(x.Z,{className:"h-8 w-8"}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-purple-100",children:"Total Questions"}),(0,r.jsx)("p",{className:"text-3xl font-bold",children:(null==t?void 0:t.overview.totalQuestions)||0})]})]})}),(0,r.jsx)("div",{className:"card p-6 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(a.TrendingUpIcon,{className:"h-8 w-8"}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-orange-100",children:"Tests Taken"}),(0,r.jsx)("p",{className:"text-3xl font-bold",children:(null==t?void 0:t.overview.totalTests)||0})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"card p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Content Hierarchy"}),(0,r.jsx)(h.Z,{className:"h-5 w-5 text-gray-400"})]}),(0,r.jsx)(g.h,{width:"100%",height:300,children:(0,r.jsxs)(f.v,{data:(null==t?void 0:t.overview)?[{level:"Exams",count:t.overview.totalExams,color:"#8B5CF6"},{level:"Subjects",count:t.overview.totalSubjects,color:"#06B6D4"},{level:"Chapters",count:t.overview.totalChapters,color:"#10B981"},{level:"Topics",count:t.overview.totalTopics,color:"#F59E0B"},{level:"Subtopics",count:t.overview.totalSubtopics,color:"#EF4444"},{level:"Sections",count:t.overview.totalSections,color:"#8B5CF6"},{level:"Subsections",count:t.overview.totalSubsections,color:"#06B6D4"},{level:"Questions",count:t.overview.totalQuestions,color:"#10B981"}]:[],children:[(0,r.jsx)(j.q,{strokeDasharray:"3 3"}),(0,r.jsx)(p.K,{dataKey:"level"}),(0,r.jsx)(w.B,{}),(0,r.jsx)(y.u,{}),(0,r.jsx)(b.$,{dataKey:"count",fill:"#8884d8"})]})})]}),(0,r.jsxs)("div",{className:"card p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Question Difficulty Distribution"}),(0,r.jsx)(m.Z,{className:"h-5 w-5 text-gray-400"})]}),(0,r.jsx)(g.h,{width:"100%",height:300,children:(0,r.jsxs)(N.u,{children:[(0,r.jsx)(k.b,{data:T(),cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{difficulty:t,count:s}=e;return"".concat(t,": ").concat(s)},outerRadius:100,fill:"#8884d8",dataKey:"count",children:T().map((e,t)=>(0,r.jsx)(E.b,{fill:e.fill},"cell-".concat(t)))}),(0,r.jsx)(y.u,{})]})})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-6 mb-8",children:(0,r.jsxs)("div",{className:"card p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Questions per Exam"}),(0,r.jsx)(h.Z,{className:"h-5 w-5 text-gray-400"})]}),(0,r.jsx)(g.h,{width:"100%",height:400,children:(0,r.jsxs)(f.v,{data:(null==t?void 0:t.statistics.questionsPerExam)?t.statistics.questionsPerExam.slice(0,10):[],margin:{top:20,right:30,left:20,bottom:5},children:[(0,r.jsx)(j.q,{strokeDasharray:"3 3"}),(0,r.jsx)(p.K,{dataKey:"examName"}),(0,r.jsx)(w.B,{}),(0,r.jsx)(y.u,{}),(0,r.jsx)(L.D,{}),(0,r.jsx)(b.$,{dataKey:"questionCount",fill:"#0088FE"})]})})]})}),M&&(0,r.jsxs)("div",{className:"card p-6 mb-8 border-l-4 border-blue-500",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)(o.Z,{className:"h-6 w-6 text-blue-500 mr-2"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"AI-Powered Insights"})]}),(0,r.jsx)("div",{className:"prose dark:prose-invert max-w-none",children:(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-sm bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:M})})]}),(0,r.jsxs)("div",{className:"card p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"}),(0,r.jsx)(v,{className:"h-5 w-5 text-gray-400"})]}),(null==t?void 0:t.recentActivity)&&t.recentActivity.length>0?(0,r.jsx)("div",{className:"space-y-4",children:t.recentActivity.slice(0,5).map((e,t)=>{var s;return(0,r.jsxs)("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(x.Z,{className:"h-8 w-8 text-blue-500"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:"New question added"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[null===(s=e.subsection)||void 0===s?void 0:s.name," • ",e.difficulty]})]}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(e.createdAt).toLocaleDateString()})]},t)})}):(0,r.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No recent activity found"})]})]})]})}},61241:function(e,t,s){"use strict";s.d(t,{$:function(){return r}});var a=s(57437);function r(e){let{size:t="md",color:s="primary",className:r=""}=e;return(0,a.jsxs)("svg",{className:"animate-spin ".concat({sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"}[t]," ").concat({primary:"text-blue-600",white:"text-white",gray:"text-gray-600"}[s]," ").concat(r),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}s(2265)},5127:function(e,t,s){"use strict";s.d(t,{H:function(){return c},a:function(){return o}});var a=s(57437),r=s(2265),l=s(26647),i=s(69064);let n=(0,r.createContext)(void 0);function c(e){let{children:t}=e,[s,c]=(0,r.useState)(null),[o,d]=(0,r.useState)(!0),[u,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{let e=localStorage.getItem("auth_token");if(e){x(e);try{let e=await l.O.getCurrentUser();c(e)}catch(e){localStorage.removeItem("auth_token"),x(null)}}d(!1)})()},[]);let h=async e=>{try{d(!0);let t=await l.O.login(e);return x(t.token),c(t.user),localStorage.setItem("auth_token",t.token),i.ZP.success("Login successful!"),t}catch(e){throw i.ZP.error(e.message||"Login failed"),e}finally{d(!1)}};return(0,a.jsx)(n.Provider,{value:{user:s,token:u,isLoading:o,login:h,logout:()=>{c(null),x(null),localStorage.removeItem("auth_token"),i.ZP.success("Logged out successfully")}},children:t})}function o(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},26647:function(e,t,s){"use strict";s.d(t,{O:function(){return r},h:function(){return a}});let a=s(83464).Z.create({baseURL:"http://localhost:8001/api",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),a.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("auth_token"),window.location.href="/auth/login"),Promise.reject(e)});let r={async login(e){try{return(await a.post("/auth/login",e)).data}catch(e){var t,s;throw Error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Login failed")}},async register(e){try{return(await a.post("/auth/register",e)).data}catch(e){var t,s;throw Error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Registration failed")}},async getCurrentUser(){try{return(await a.get("/auth/me")).data.user}catch(s){var e,t;throw Error((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to get user")}},logout(){localStorage.removeItem("auth_token")}}},42548:function(e,t,s){"use strict";var a=s(2265);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});t.Z=r},23167:function(e,t,s){"use strict";var a=s(2265);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))});t.Z=r},12087:function(e,t,s){"use strict";var a=s(2265);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))});t.Z=r}},function(e){e.O(0,[464,64,648,652,495,971,117,744],function(){return e(e.s=65779)}),_N_E=e.O()}]);