(()=>{var e={};e.id=258,e.ids=[258],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},91882:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>l}),r(41520),r(22834),r(32029),r(35866);var s=r(23191),a=r(88716),i=r(37922),n=r.n(i),o=r(95231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let l=["",{children:["dashboard",{children:["notifications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,41520)),"/app/admin_dashboard/frontend/src/app/dashboard/notifications/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,22834)),"/app/admin_dashboard/frontend/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,32029)),"/app/admin_dashboard/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/app/admin_dashboard/frontend/src/app/dashboard/notifications/page.tsx"],x="/dashboard/notifications/page",m={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/notifications/page",pathname:"/dashboard/notifications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},77117:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},53106:(e,t,r)=>{Promise.resolve().then(r.bind(r,7022))},49774:(e,t,r)=>{Promise.resolve().then(r.bind(r,52515))},91051:(e,t,r)=>{Promise.resolve().then(r.bind(r,57480))},7022:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(10326);!function(){var e=Error("Cannot find module '@/contexts/auth/AuthContext'");throw e.code="MODULE_NOT_FOUND",e}();var a=r(35047);function i({children:e}){let{user:t,isLoading:r}=Object(function(){var e=Error("Cannot find module '@/contexts/auth/AuthContext'");throw e.code="MODULE_NOT_FOUND",e}())();return((0,a.useRouter)(),r)?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/common/Spinner'");throw e.code="MODULE_NOT_FOUND",e}()),{size:"lg"}),s.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading dashboard..."})]})}):t&&"admin"===t.role?s.jsx(s.Fragment,{children:e}):s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Access Denied"}),s.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"You need admin privileges to access this dashboard."})]})})}r(17577),function(){var e=Error("Cannot find module '@/components/ui/common/Spinner'");throw e.code="MODULE_NOT_FOUND",e}()},52515:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(10326),a=r(17577);let i=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))});var n=r(59675),o=r(8566),d=r(40381),l=r(74723),c=r(94464);function x(){let[e,t]=(0,a.useState)([]),[r,x]=(0,a.useState)([]),[m,u]=(0,a.useState)(!0),[h,g]=(0,a.useState)(!1),[p,b]=(0,a.useState)(!1),{register:f,handleSubmit:y,reset:j,watch:v,formState:{errors:N}}=(0,l.cI)({defaultValues:{targetType:"all"}}),w=v("targetType"),k=async()=>{try{u(!0);let e=localStorage.getItem("token"),r=await c.Z.get("http://localhost:8003/api/api/admin/notifications/history",{headers:{Authorization:`Bearer ${e}`}});t(r.data)}catch(e){d.ZP.error("Failed to fetch notifications")}finally{u(!1)}},_=async e=>{b(!0);try{let t=localStorage.getItem("token"),r={title:e.title,body:e.body};"exam"===e.targetType&&e.examId&&(r.examId=e.examId);let s=await c.Z.post("http://localhost:8003/api/api/admin/notifications/send",r,{headers:{Authorization:`Bearer ${t}`}});s.data.success?d.ZP.success(`Notification sent to ${s.data.sent_count} users!`):d.ZP.error(s.data.message||"Failed to send notification"),g(!1),k()}catch(e){d.ZP.error(e.response?.data?.error||"Failed to send notification")}finally{b(!1)}},O=async()=>{try{let e=localStorage.getItem("token");await c.Z.post("http://localhost:8003/api/api/admin/notifications/test",{title:"Test Notification",body:"This is a test notification from admin panel"},{headers:{Authorization:`Bearer ${e}`}}),d.ZP.success("Test notification sent!")}catch(e){d.ZP.error("Failed to send test notification")}};return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Push Notifications"}),s.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Send targeted push notifications to users"})]}),(0,s.jsxs)("div",{className:"mb-6 flex gap-3",children:[(0,s.jsxs)("button",{onClick:()=>{j({title:"",body:"",examId:"",targetType:"all"}),g(!0)},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[s.jsx(i,{className:"w-5 h-5 mr-2"}),"Send Notification"]}),(0,s.jsxs)("button",{onClick:O,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:[s.jsx(n.Z,{className:"w-5 h-5 mr-2"}),"Send Test"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Sent"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.reduce((e,t)=>e+t.sentCount,0)})]}),s.jsx(n.Z,{className:"w-12 h-12 text-blue-500"})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Campaigns"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.length})]}),s.jsx(o.Z,{className:"w-12 h-12 text-green-500"})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Success Rate"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[e.length>0?Math.round(e.filter(e=>"sent"===e.status).length/e.length*100):0,"%"]})]}),s.jsx(i,{className:"w-12 h-12 text-purple-500"})]})})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Notification History"})}),m?s.jsx("div",{className:"text-center py-8",children:"Loading..."}):e.length>0?s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.map(e=>s.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:s.jsx("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.title}),s.jsx("span",{className:`text-xs px-2 py-1 rounded ${"sent"===e.status?"bg-green-100 text-green-700":"failed"===e.status?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:e.status})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:e.body}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,s.jsxs)("span",{children:["Sent to ",e.sentCount," users"]}),s.jsx("span",{children:"â€¢"}),s.jsx("span",{children:new Date(e.createdAt).toLocaleString()})]})]})})},e.id))}):s.jsx("div",{className:"text-center py-12 text-gray-500",children:"No notifications sent yet. Send your first notification!"})]}),s.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/common/Modal'");throw e.code="MODULE_NOT_FOUND",e}()),{isOpen:h,onClose:()=>g(!1),title:"Send Push Notification",children:(0,s.jsxs)("form",{onSubmit:y(_),className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Target Audience ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{...f("targetType",{required:!0}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"all",children:"All Users"}),s.jsx("option",{value:"exam",children:"Users by Exam"})]})]}),"exam"===w&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Select Exam ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{...f("examId",{required:"exam"===w}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"",children:"Select Exam"}),r.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Title ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",...f("title",{required:"Title is required"}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Notification title"}),N.title&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:N.title.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Message ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{...f("body",{required:"Message is required"}),rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Notification message"}),N.body&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:N.body.message})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>g(!1),disabled:p,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition disabled:opacity-50",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:p,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50 flex items-center justify-center",children:p?s.jsx(s.Fragment,{children:"Sending..."}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(i,{className:"w-4 h-4 mr-2"}),"Send Notification"]})})]})]})})]})}!function(){var e=Error("Cannot find module '@/components/ui/common/Modal'");throw e.code="MODULE_NOT_FOUND",e}()},57480:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(10326),a=r(97270),i=r.n(a);r(23824),function(){var e=Error("Cannot find module '@/contexts/auth/AuthContext'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/contexts/theme/ThemeContext'");throw e.code="MODULE_NOT_FOUND",e}();var n=r(40381);function o({children:e}){return s.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:s.jsx("body",{className:i().className,children:s.jsx(Object(function(){var e=Error("Cannot find module '@/contexts/theme/ThemeContext'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,s.jsxs)(Object(function(){var e=Error("Cannot find module '@/contexts/auth/AuthContext'");throw e.code="MODULE_NOT_FOUND",e}()),{children:[e,s.jsx(n.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"var(--toast-bg)",color:"var(--toast-color)"}}})]})})})})}},22834:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/app/admin_dashboard/frontend/src/app/dashboard/layout.tsx#default`)},41520:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/app/admin_dashboard/frontend/src/app/dashboard/notifications/page.tsx#default`)},32029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/app/admin_dashboard/frontend/src/app/layout.tsx#default`)},23824:()=>{},59675:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(17577);let a=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))})},8566:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(17577);let a=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[99,723,468],()=>r(91882));module.exports=s})();